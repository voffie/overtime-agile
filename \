<script setup>
import { ref } from "vue"
import Button from '@/components/Button.vue'
const props = defineProps(['solve'])
const puzzleCompleted = ref(false)
const metaPuzzleCompleted = ref(false)
const showModal = ref(false)


function isSuccess() {
  props.solve()
}

function isPuzzleCompleted() {
  puzzleCompleted.value = !puzzleCompleted.value
}

function isMetaPuzzleCompleted() {
  metaPuzzleCompleted.value = !metaPuzzleCompleted.value
}

function isShowModal() {
  showModal.value = !showModal.value

}

</script>

<template>

  <header class="puzzle-header">
    <h2>Hello</h2>
    <Button class="notes-button" text="Notes" @click="isShowModal"></Button>
  </header>


  <section class="puzzle-main">

    <section v-if="showModal" class="puzzle-modal">
      <div class="modal-gallery">
        <figure class="modal-figure">
          <img class="modal-img" src="@/assets/img/design-room/img/fm-desk-bg-white.png" alt="">
          <figcaption class="modal-caption">Desk</figcaption>
        </figure>
        <figure class="modal-figure">
          <img class="modal-img" src="@/assets/img/design-room/img/fm-desk-bg-white.png" alt="">
          <figcaption>Desk</figcaption>
        </figure>
        <figure class="modal-figure">
          <img class="modal-img" src="@/assets/img/design-room/img/fm-desk-bg-white.png" alt="">
          <figcaption>Desk</figcaption>
        </figure>
        <figure class="modal-figure">
          <img class="modal-img" src="@/assets/img/design-room/img/fm-desk-bg-white.png" alt="">
          <figcaption>Desk</figcaption>
        </figure>
        <figure class="modal-figure">
          <img class="modal-img" src="@/assets/img/design-room/img/fm-desk-bg-white.png" alt="">
          <figcaption>Desk</figcaption>
        </figure>
      </div>
      <Button class="notes-button" text="Close Notes" @click="isShowModal"></Button>
    </section>
  </section>


  <Button text="Main Puzzle" @click="isPuzzleCompleted" />
  <Button text="Meta Puzzle" @click="isMetaPuzzleCompleted" />
  <Button v-if="puzzleCompleted && metaPuzzleCompleted" text="Puzzle Completed" @click="isSuccess" />
</template>

<style scoped>
.puzzle-header {
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 0;
  padding: 0.5rem;

}

.puzzle-main {
  display: flex;

}

.puzzle-modal {
  overflow: auto;
  position: absolute;
  inset: 0;
  z-index: 5;
  background-color: rgba(0, 0, 0, 0.5);
  padding: 2rem;
  display: flex;
  justify-content: center;
  align-items: center;
  pointer-events: all;
  flex-direction: column;

}

.modal-gallery {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  justify-items: center;
  align-items: center;
  max-width: 80%;
  overflow: auto;
}

.modal-figure {
  box-shadow: 6px 8px 8px -4px #f9f9f9;
}

.modal-img {
  width: 80%;
  height: auto;

}

.modal-caption {
  text-align: center;
  font-size: x-large;
  font-weight: bolder;
  background-color: var(--container-bg);
  padding: 0.2rem;
  transform: skew(-20deg);
  width: 75%;
  align-self: center;
  margin: 0 auto;
}

.notes-button {
  min-width: 3rem;
  min-height: 3rem;

}
</style>
